/*
 * Sticky Footer with no restrictions on the size of the footer area like traditional solutions
 * 
 * Flexbox is awesome.
 * 
 * http://philipwalton.github.io/solved-by-flexbox/demos/sticky-footer/
 * https://github.com/philipwalton/solved-by-flexbox/blob/master/_sass/components/_site.scss
 *
 * I've made a modification here to account for some performance issues with scripts adding elements to the <body>, especially on longer pages in Firefox
 * Basically, don't set display:flex on the <body> element directly.
 * My fix is to move the whole shebang one layer deeper (html -> body -> .sticky-footer)
 * See: http://jsbin.com/todajate/3/edit
 */

%sticky-footer-flexcolumns {
  display: flex;
  flex-direction: column;
  
  // you don't want anything shrinking below its default size
  > * {
    flex-shrink: 0;
  }
}

// use this for the elements that have to grow to body height
%sticky-footer-body-elements {
  // theoretically *should* just be flex:1 
  // but explicit flex:1 0 auto; fixes an issue in IE10
  // http://thatemil.com/blog/2013/11/03/sticky-footers-flexbox-and-ie10/
	flex: 1 0 auto;
}

.flexbox {
  /*
   "IE10 needs an explicitly declared height on both the <body> and <html> elements to trigger correct calculation of heights for flexible containers along the vertical axis of the page. I haven't found any other properties that trigger the correct behavior so far. It doesn't seem to matter which height you set, but 100% seems sensible."
  
   src: http://thatemil.com/blog/2013/11/03/sticky-footers-flexbox-and-ie10/
   see also: http://jsbin.com/ERELezu/24/edit
   and: http://jsbin.com/todajate/3/edit
   
   can target IE10 (and 11?) with .flexboxtweener if needed with this test:
   
   Modernizr.addTest('flexboxtweener', Modernizr.testAllProps('flexAlign', 'end', true));
   (via https://github.com/Modernizr/Modernizr/issues/812 )
   
  */
  &,>body {
    height: 100%;
  }

  .sticky-footer {
    @extend %sticky-footer-flexcolumns;
    /*
    min-height: 100vh;
    
     That was Phil Walton's solution.
     I found "100vh" didn't play well with Tether (jitter-y scrolling)
     (min)-height 100% seems vastly smoother
     
     This requires height: 100% on html/body because of course why not
    */
    min-height: 100%; 
                      
  }

  // Additional markup for sticky footer. 
  // This is the element that Will expand to body height. 
  // Must be a direct child of .sticky-footer
  .sticky-footer-body {
    @extend %sticky-footer-body-elements;

    // last touch: this makes sure the next child also grows
    // this is because the wraps for the off-canvas use absolute positioning
    @extend %sticky-footer-flexcolumns;
  }

  .main { @extend %sticky-footer-body-elements; }

} 