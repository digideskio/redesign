!function($,t,e,i){$.fn.attemptFocus=function(){return this.filter(":focusable").first().each(function(){try{this.focus()}catch(t){}}),this},$.fn.traverse=function(t,e){if("string"==typeof t&&/prev|next/.test(t)){var i=this.index(e),s=/prev/.test(t)?-1:0;return e&&-1!==i&&(s=/prev/.test(t)?i-1:i+1),s===this.length&&(s=0),this.eq(s)}return this},$.fn.traverseAndFocus=function(t,i){var s=this;return"string"==typeof t&&/prev|next/.test(t)&&(s=this.traverse(t,i||e.activeElement).attemptFocus()),s}}(jQuery,this,this.document),$.fn.toggleAria=function(){var t=arguments,e=function(t,e){var i=$(t),s="aria-"+e.replace("aria-",""),n=i.attr(s);i.attr(s,"true"===n?"false":"true")};return this.each(function(){var i=this;$.each(t,function(t,s){e(i,s)})})};var OSLC={dasherize:function(t){return _.dasherize(t).replace(/^ms-/,"-ms-")},funcFold:function(t){return function(e,i){return e+t(i)}},templateFold:function(t){return function(e,i){return e+_.template(t,i)}},mediaQueries:{},modules:{},transitionEventNames:{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"}};_.forEach(["screen","landscape","portrait","hand-up","hand-only","knee-up","knee-only","desk-up","desk-only","workstation-up","workstation-only","neckbeard-up","neckbeard-only"],function(t){$("head").append('<meta class="oslc-mq-'+t+'" />'),OSLC.mediaQueries[t]=$(".oslc-mq-"+t).css("font-family").split(/\/|\\|'|"/g).join("")}),OSLC.supportsTransitions=Modernizr&&"csstransitions"in Modernizr&&Modernizr.csstransitions&&{end:OSLC.transitionEventNames[Modernizr.prefixed("transition")]},OSLC.supportsAcceleratedTransitions=Modernizr&&"csstransforms3d"in Modernizr&&Modernizr.csstransforms3d,$(document).on("click","[data-toggle-class]",function(t){var e=$(this);e.attr("data-target")&&(_.forEach(e.attr("data-target").split(","),function(t){var i;i=t.indexOf("|self|")>-1?e:t.indexOf("|parent")>-1?e.parent():$(t),i.length&&i.toggleClass(e.attr("data-toggle-class").split(".").join(""))}),t.preventDefault())}),$(function(){var t=_.template('<div class="fluid-video" <%= style %> ><%= video %></div>');$('iframe[src*="youtube"], iframe[src*="vimeo"]').not(".no-resize").each(function(e,i){i.outerHTML=t({style:'style="padding-bottom: '+i.height/i.width*100+'%;"',video:i.outerHTML})})}),function($,t,e,i){"use strict";OSLC.dropdowns=[];var s=0,n=_.create(OSLC,{name:"Prospectus",DEFAULTS:{isDropdown:null,manageFocus:!0},init:function(t,e){this.els={menu:$(t)},this.options=e,this.options.isDropdown&&(this.isOpened=!1);var i=0;s++,this.els.menu.attr({role:this.options.manageFocus?this.els.menu.hasClass("horizontal")?"menubar":"menu":"group","data-prospectus":"true",id:this.els.menu[0].id||"prospectus-"+s}).find("ul,li").attr("role","presentation").end().find("a").addClass("js-prospectus-focusable").attr({role:this.options.manageFocus?"menuitem":null,id:function(){return i++,this.id||"prospectus-"+s+"-"+i}}),this.options.isDropdown&&(OSLC.dropdowns.push(this),$('<button type="button" tabindex="-1" class="close"><span class="sr-only">Close</span><i class="icon grunticon-js-close"></i></button>').data("dismiss",this).appendTo(this.els.menu.find(".items"))),this.setFocusable()},findFocusableItem:function(){var t=this.els.menu,e=$("#"+t.attr("aria-activedescendant"));return e.length?e:t.find("a").first()},clearFocusable:function(){this.options.manageFocus&&this.els.menu.find("a").attr("tabIndex","-1")},setFocusable:function(){if(this.options.manageFocus){var t=this.findFocusableItem();this.clearFocusable(),t.length&&t.attr("tabIndex","0")}},focus:function(){return this.findFocusableItem().attemptFocus(),!0},open:function(){if(this.options.isDropdown&&!this.isOpened){this.tether=this.tether||new Tether({element:this.els.menu.appendTo("body")[0],target:this.options.isDropdown.control,attachment:"top left",targetAttachment:"top left",constraints:[{to:"scrollParent",attachment:"together",pin:["right"]}]});var t=this.tether,e=this;this.els.menu.removeClass("hidden").toggleAria("expanded","hidden").find(".items").velocity("transition.expandIn",{duration:200,begin:function(){t.position()},complete:function(){e.focus()}}),this.isOpened=!0}},close:function(){if(this.options.isDropdown&&this.isOpened){var t=this.els.menu;t.toggleAria("expanded","hidden").find(".items").velocity("transition.expandOut",{duration:100,display:"block",complete:function(){t.addClass("hidden")}}),this.isOpened=!1}}});$.fn.prospectus=function(t){return this.each(function(){var e=$(this),i=_.extend({},n.DEFAULTS,e.data(),"object"==typeof t&&t);e.data("prospectus",_.create(n)).data("prospectus").init(this,i)})},$(e).ready(function(){$("[data-prospectus]").prospectus()}),$(e).on("click touchend",".js-prospectus-focusable",function(t){var e=$(this).data("hasDropdown");e&&(t.preventDefault(),_.invoke(OSLC.dropdowns,"close"),e.open())}).on("click touchend",function(t){var e=_.filter(OSLC.dropdowns,"isOpened"),i=_.first(e);if(i){var s=i.options.isDropdown.control;$(t.target).is(s)||$.contains(s,t.target)||$.contains(i.els.menu[0],t.target)||_.invoke(e,"close")}}).on("keydown",".js-prospectus-focusable",function(t){var e=t.which||t.keyCode,i=_.range(65,91),s=_.contains(_.union([9,27,37,38,39,40],i),e),n=/37|38/.test(e)?"prev":"next",a=$(this),o=a.data("hasDropdown"),r=a.closest("[data-prospectus]"),l=r.data("prospectus").options.isDropdown,d,c,u,h;if(s&&(9!==e||l)){if(t.preventDefault(),40===e&&o)return void o.open();if(l&&_.contains([9,27,37,39],e)){if(d=$(l.control),c=d.closest("[data-prospectus]"),d.data("hasDropdown").close(),/(37|39)/.test(e))return u=c.find(":focusable").traverse(n,d),c.attr("aria-activedescendant",u[0].id).data("prospectus").setFocusable(),void(u.data("hasDropdown")&&u.data("hasDropdown").open());if(27===e)return void d.attemptFocus();if(9===e)return void $(":tabbable").not(d.siblings()).add(d).traverseAndFocus(t.shiftKey?"prev":"next",d)}h=r.find("a"),_.contains(i,e)&&(h=h.filter(function(){return _($(this).text()).trim().capitalize().startsWith(String.fromCharCode(e).toUpperCase()).value()})),h.traverseAndFocus(n,this)}}).on("mouseenter focus",".js-prospectus-focusable",function(t){var i=$(this).closest("[data-prospectus]"),s=i.data("prospectus");"mouseenter"===t.type&&i.find(":tabbable").is(e.activeElement)||(i.attr("aria-activedescendant",this.id||""),s&&s.setFocusable())})}(jQuery,this,this.document),function($,t,e,i){"use strict";var s=_.create(OSLC,{name:"Sextant",els:{nav:$("#nav"),main:$("#main"),toggle:$("#navToggle"),allToggled:$("#nav,#main,#navToggle,.close-nav"),close:$(".close-nav")},classes:{open:"nav-is-open"},is_open:function(){return this.els.main.hasClass(this.classes.open)},init:function(){console.log("Initializing Sextant global navigation"),this.els.nav.insertBefore(this.els.main),this.set_main_slide_distance(),this.bindings()},bindings:function(){var e=this;this.els.toggle.add(this.els.close).on("click.oslc.sextant",function(t){t.preventDefault(),e.toggle()});var i=_.once(function(){console.log("doing the one-time injection in case we started too large"),e.set_main_slide_distance(),$(t).trigger("lateStyleInjected.oslc.sextant")});!Modernizr.mq(e.mediaQueries["hand-only"])&&$(t).on("resize.oslc.sextant orientationchange.oslc.sextant",function(){Modernizr.mq(e.mediaQueries["hand-only"])&&i()})},open:function(){this.toggle("open")},close:function(){this.toggle("close")},toggle:function(e){e=e||(this.is_open()?"close":"open");var i="open"===e;console.log(e),$(t).trigger(e+".oslc.sextant"),this.els.allToggled[i?"addClass":"removeClass"](this.classes.open)},set_main_slide_distance:function(t){var e=this.mediaQueries["hand-only"];if(Modernizr.mq(e)){var i="@media "+e,s={};s[i]=["#main."+this.classes.open];var n=t||this.els.nav.outerHeight()+"px",a=Modernizr.csstransforms?Modernizr.prefixed("transform"):"top";a=this.dasherize(a);var o={};o[a]=Modernizr.csstransforms?"translate(0,"+n+")":n,vein.inject([s],o),console.log("injecting distance of "+n)}}});OSLC.modules.sextant=s,$(e).ready(function(){s.init()})}(jQuery,this,this.document),function($,t,e,i){"use strict";var s=0,n=_.create(OSLC,{name:"Whirligig",classes:{active:"active"},aria:{tab:{off:{"aria-expanded":"false","aria-selected":"false",tabindex:"-1"},on:{"aria-expanded":"true","aria-selected":"true",tabindex:"0"}},tabpanel:{off:{"aria-hidden":"true",tabindex:"-1"},on:{"aria-hidden":"false",tabindex:"0"}}},init:function(t){console.log("Initializing Whirligig for #"+t.id);var e=this;this.el=$(t),this.controls=$(".tab",this.el).each(function(){var t=this.getAttribute("href"),i="whirligig-tab-"+s++;$(this).attr(_.extend({role:"tab",id:i,"aria-controls":t.replace("#","")},e.aria.tab.off)),$(t).attr(_.extend({role:"tabpanel","aria-labelledby":i},e.aria.tabpanel.off))}),this.control_wrap=$(".tabs",this.el).attr("role","tablist"),this.controls_area=$(".controls",this.el),this.indicator=$('<ins class="indicator"></ins>').attr("role","presentation").appendTo(this.control_wrap),this.wrapper=$(".panels",this.el),this.panels=$(".panel",this.el),this.controls.hasClass(this.classes.active)||this.controls.first().addClass(this.classes.active),this.to(this.controls.filter("."+this.classes.active).attr("href"),!1),this.bindings()},bindings:function(){var t=this;this.controls.on("click.oslc.whirligig",function(e){e.preventDefault(),$(this).hasClass(t.classes.active)||t.to($(this).attr("href"),!0)}).on("keydown.oslc.whirligig",function(e){$.inArray(e.keyCode,[37,38,39,40])>-1&&e.preventDefault(),(37===e.keyCode||38===e.keyCode)&&t.prev(!0),(39===e.keyCode||40===e.keyCode)&&t.next(!0)})},next:function(t){var e=this.panels.filter("."+this.classes.active),i=e.is(this.panels.last())?this.panels.first():e.next();return this.to("#"+i[0].id,t),!1},prev:function(t){var e=this.panels.filter("."+this.classes.active),i=e.is(this.panels.first())?this.panels.last():e.prev();return this.to("#"+i[0].id,t),!1},to:function(t,e){var i,s,n,a,o;i=$(t),s=i.index(),n="-"+100*s+"%",a=this.supportsAcceleratedTransitions?Modernizr.prefixed("transform"):"left",o=this.supportsAcceleratedTransitions?"translate3d("+n+",0,0)":n,i.hasClass(this.classes.active)||(this.el.trigger({type:"slideStart",relatedTarget:i[0]}),this.wrapper.css(a,o).find("> ."+this.classes.active).removeClass(this.classes.active).attr(this.aria.tabpanel.off),i.addClass(this.classes.active).attr(this.aria.tabpanel.on),this.controls.removeClass(this.classes.active).attr(this.aria.tab.off).filter('[href="'+t+'"]').addClass(this.classes.active).attr(this.aria.tab.on),this.move_indicator(),e&&this.controls.filter("."+this.classes.active).focus())},move_indicator:function(){var t,e,i,s,n;t=this.controls.filter("."+this.classes.active),e=t.position().left+"px",i=t.width()-(t.is(":first-child")?0:4)+"px",s=this.supportsAcceleratedTransitions?Modernizr.prefixed("transform"):"left",n=this.supportsAcceleratedTransitions?"translate3d("+e+",0,0)":e,this.supportsTransitions&&this.indicator.filter(":visible").one(this.supportsTransitions.end,function(){$(this).removeClass("moving")}).addClass("moving"),this.indicator.css("width",i).css(s,n)}});OSLC.modules.whirligig=n,$(function(){$("[data-whirligig]").each(function(){$(this).data("whirligig",_.create(n)).data("whirligig").init(this)})})}(jQuery,this,this.document),function($,t,e,i){"use strict";$(e).on("click",".close",function(t){t.preventDefault();var e=$(this).data("dismiss");e&&e.close&&e.close()}).on("touchend",".close",function(t){t.preventDefault(),t.target.click()})}(jQuery,this,this.document),function($,t,e,i){"use strict";var s=0,n=_.create(OSLC,{name:"Bartender",defaultStates:{filter:{on:"All",label:"All"},sort:{on:"order",direction:"asc",label:"Original order"}},bartenderItemTemplate:_.template('<a href="#" class="item hasFlagInline" id="bartender-<%= id %>-<%= name %>-control" aria-haspopup="true" aria-owns="bartender-<%= id %>-<%= name %>-dropdown" aria-controls="bartender-<%= id %>-<%= name %>-dropdown"><div class="flag"><div class="image"><i class="icon grunticon-menu-<%= name %>"></i></div><div class="body"><span id="bartender-<%= id %>-<%= name %>-label" data-text="<%= _.capitalize(name) %>"><%= _.capitalize(name) %></span> &#9662;</div></div></a>'),init:function(t){s++,this.id=s,this.els={menu:$(t),listing:$("#main").find(".listing").first()},this.constructMenu(),this.bindings(),this.update()},update:function(){var t=this,e=this.els.listing.find("[data-filter-target]"),i,s={duration:250,drag:!0};_.forEach(this.state,function(e,i){$(t.dropdowns[i]).find(".item").removeClass("current").filter('[data-label="'+e.label+'"]').addClass("current");var s="#bartender-"+t.id+"-"+i+"-label";$(s).html($(s).data("text")+(_.contains(["All","Original order"],e.label)?"":': <span class="activeFilter">'+e.label+"</span>"))}),i=e.filter(function(){var e=$(this);return _(t.state).omit("sort").mapValues("on").every(function(t,i){return e.is("[data-filter-"+i+'~="'+t+'"]')})}),e.not(i).filter(":visible").velocity("transition.expandOut",_.defaults({complete:function(){$(this).addClass("hidden")}},s)),i.filter(":hidden").removeClass("hidden").velocity("transition.expandIn",s),this.state.sort&&e.tsort({data:this.state.sort.on,order:this.state.sort.direction})},bindings:function(){var t=this;$(e).on("click","[data-update]",function(e){e.preventDefault();var i=$(this),s=i.data();i.hasClass("current")||(t.state[s.update]=_.omit(s,"update"),t.update())})},constructMenu:function(){this.state={},this.dropdowns={},this.menuItems={},this.els.cards=this.els.listing.find(".card").closest(".column");var t=this.els.menu.data("controls");return t?(_.forEach(t.split(","),this.buildControl,this),void($.fn.prospectus&&this.els.menu.prospectus())):void console.log("No controls specified for Bartender. Bailing.")},buildControl:function(t){var e=this.els.cards,i,s=this.getMenuItems(t,!0);return s.length<2?void console.log("Control for ",t," did not have enough items. Bailing."):(i=$(this.bartenderItemTemplate({name:t,id:this.id})).appendTo(this.els.menu),this.state[t]=this.defaultStates[t]||this.defaultStates.filter,"sort"===t?e.attr("data-order",function(){return $(this).index()}):e.attr("data-filter-target","true").attr("data-filter-"+t,function(){return _.reduce($(this).find('[data-filter-on="'+t+'"]'),function(t,e){return t+" "+_.classify(_.trim($(e).text()))},"All")}),this.dropdowns[t]=this.buildDropdownMenu(t),void($.fn.prospectus&&(this.dropdowns[t].prospectus({isDropdown:{control:i[0]}}),i.data("hasDropdown",this.dropdowns[t].data("prospectus")))))},getMenuItems:function(t,e){var i=[],s=function(t){var e=["data","html","href","classes"],i=_.defaults(_.zipObject(e,t),_.zipObject(e,[{},"Label not found","#",""]));return i.data.label||(i.data.label=i.html),i};return"sort"===t?i=[[{on:"date",direction:"desc"},"Newest"],[{on:"date",direction:"asc"},"Oldest"],[{on:"order",direction:"asc"},"Original order"]]:(i=_(this.els.listing.find('[data-filter-on="'+t+'"]')).groupBy(function(t){return _.trim($(t).text())}).map(function(t,e){var i=t[0],s=_.trim(e);return[{count:t.length,label:s,on:_.classify(s)},i.innerHTML,i.href,i.className]}).value(),i.push([{count:this.els.cards.length,on:"All"},"All"])),i=_.map(i,s),e&&(this.menuItems[t]=i),i},buildDropdownMenu:function(t){var e=$('<div class="items">'),i='<a class="item" href="<%= href %>" data-update="'+t+'" <% _.each(data, function(val,key) { %>data-<%= key %>="<%= val %>" <% }); %>><span class="<%= classes %>"><%= html %></span></a>';return e.html(_.reduce(this.menuItems[t],this.templateFold(i),"")),"sort"!==t&&e.find(".item").tsort({data:"count",order:"desc"},{data:"label"}),$("<div>").append(e).addClass("hidden dropdown menu tensed").attr({"aria-expanded":"false","aria-hidden":"true","aria-labelledby":"bartender-"+this.id+"-"+t+"-control",id:"bartender-"+this.id+"-"+t+"-dropdown"})}});OSLC.modules.bartender=n,$(e).ready(function(){$("[data-bartender]").each(function(){$(this).data("bartender",_.create(n)).data("bartender").init(this)})})}(jQuery,this,this.document),function($,t,e,i){"use strict";var s=0,n=_.create(OSLC,{name:"DeepThroat",init:function(t){this.el=t,this.id="deepthroat-tooltip-"+s,s++,this.isOpen=!1,this.mouseOver=!1;var e=$(t),i={header:e.text(),tip:e.attr("title")||e.attr("data-tooltip")||"You did not define tooltip text, silly!",id:this.id},n=_.template('<div class="hidden tooltip" id="<%= id %>" role="tooltip" aria-hidden="true"><div class="body copy"><%- tip%></div></div>',i);!e.is(":tabbable")&&e.attr("tabindex","0"),e.addClass("js-activates-tooltip tooltip-wrap").append(' <i class="icon grunticon-js-infotip"></i>').attr({"aria-describedby":this.id,title:null}),this.tip=$(n).data("deepthroat",this),$('<button type="button" tabindex="-1" class="close"><span class="sr-only">Close</span><i class="icon grunticon-js-close"></i></button>').data("dismiss",this).appendTo($(this.tip).find(".body"))},open:function(){if(!this.isOpen){this.tether=this.tether||new Tether({element:this.tip[0],target:this.el,attachment:"bottom center",targetAttachment:"top center",constraints:[{to:"scrollParent",attachment:"together",pin:["right","left"]}]});var t=this.tether;this.tip.removeClass("hidden").toggleAria("hidden").find(".body").velocity("transition.flipYIn",{duration:250,begin:function(){t.position()}}),this.isOpen=!0}},close:function(){if(this.isOpen){var t=this;this.tip.toggleAria("hidden").find(".body").velocity("transition.flipYOut",{duration:150,display:"block",complete:function(){t.tip.addClass("hidden")}}),this.isOpen=!1}},show:function(){this.open()},hide:function(){this.close()}});$.fn.deepthroat=function(){return this.each(function(){$(this).data("deepthroat",_.create(n)).data("deepthroat").init(this)})},$(e).ready(function(){$("[data-tooltip]").deepthroat()}),$(e).on("focusin focusout mouseenter keydown touchend",".js-activates-tooltip",function(t){var e=$(this).data("deepthroat");("keydown"!==t.type||27===(t.which||t.keyCode))&&("mouseenter"===t.type&&(e.mouseOver=!0),"touchend"===t.type&&t.preventDefault(),e&&e[/focusout|keydown/.test(t.type)?"close":"open"]())}).on("mouseenter",".tooltip",function(){var t=$(this).data("deepthroat");t&&(t.mouseOver=!0)}).on("mouseleave",".tooltip, .js-activates-tooltip",function(){var t=$(this).data("deepthroat");t&&(t.mouseOver=!1,_.delay(function(){t.mouseOver||t.close()},500))})}(jQuery,this,this.document),function($,t,e,i){"use strict";var s=_.create(OSLC,{name:"Doubtfire",els:{nav:$("#nav")},init:function(){console.log("Initialize Doubtfire nanny class"),this.bindings()},bindings:function(){var e=this.modules.sextant,i=this.els.nav.data("whirligig"),s=this;if(e&&i){console.log("DOUBTFIRE: Initialize Sextant + Whirligig interactions"),this.els.nav.on("slideStart",function(t){s.set_main_slide_distance(t.relatedTarget)});var n=_.once(function(){console.log("fired the resize fixes. shouldnt see this again!"),i.move_indicator(),s.set_main_slide_distance()});$(t).on("open.oslc.sextant lateStyleInjected.oslc.sextant orientationchange.oslc.sextant",function(){Modernizr.mq(OSLC.mediaQueries["hand-only"])&&n()})}},set_main_slide_distance:function(t){var e=this.els.nav.data("whirligig");t=t?$(t):e.panels.filter(".active");var i=e.controls_area.outerHeight()+t.outerHeight()+"px";this.modules.sextant.set_main_slide_distance(i)}});$(e).ready(function(){s.init()})}(jQuery,this,this.document);