function visible(t){return $.expr.filters.visible(t)&&!$(t).parents().addBack().filter(function(){return"hidden"===$.css(this,"visibility")}).length}function focusable(t,e){var i,s,n,a=t.nodeName.toLowerCase();return"area"===a?(i=t.parentNode,s=i.name,t.href&&s&&"map"===i.nodeName.toLowerCase()?(n=$("img[usemap=#"+s+"]")[0],!!n&&visible(n)):!1):(/input|select|textarea|button|object/.test(a)?!t.disabled:"a"===a?t.href||e:e)&&visible(t)}$.fn.toggleAria=function(t){return this.each(function(){var e=$(this),i="aria-"+t.replace("aria-",""),s=e.attr(i);e.attr(i,"true"===s?"false":"true")})},$.extend($.expr[":"],{data:$.expr.createPseudo?$.expr.createPseudo(function(t){return function(e){return!!$.data(e,t)}}):function(t,e,i){return!!$.data(t,i[3])},focusable:function(t){return focusable(t,!isNaN($.attr(t,"tabindex")))},tabbable:function(t){var e=$.attr(t,"tabindex"),i=isNaN(e);return(i||e>=0)&&focusable(t,!i)}});var OSLC={dasherize:function(t){return _.dasherize(t).replace(/^ms-/,"-ms-")},funcFold:function(t){return function(e,i){return e+t(i)}},templateFold:function(t){return function(e,i){return e+_.template(t,i)}},mediaQueries:{},modules:{},transitionEventNames:{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"}};_.forEach(["screen","landscape","portrait","hand-up","hand-only","knee-up","knee-only","desk-up","desk-only","workstation-up","workstation-only","neckbeard-up","neckbeard-only"],function(t){$("head").append('<meta class="oslc-mq-'+t+'" />'),OSLC.mediaQueries[t]=$(".oslc-mq-"+t).css("font-family").split(/\/|\\|'|"/g).join("")}),OSLC.supportsTransitions=Modernizr&&"csstransitions"in Modernizr&&Modernizr.csstransitions&&{end:OSLC.transitionEventNames[Modernizr.prefixed("transition")]},OSLC.supportsAcceleratedTransitions=Modernizr&&"csstransforms3d"in Modernizr&&Modernizr.csstransforms3d,$(document).on("click","[data-toggle-class]",function(t){var e=$(this);e.attr("data-target")&&(_.forEach(e.attr("data-target").split(","),function(t){var i;i=t.indexOf("|self|")>-1?e:t.indexOf("|parent")>-1?e.parent():$(t),i.length&&i.toggleClass(e.attr("data-toggle-class").split(".").join(""))}),t.preventDefault())}),$(function(){var t=_.template('<div class="fluid-video" <%= style %> ><%= video %></div>');$('iframe[src*="youtube"], iframe[src*="vimeo"]').not(".no-resize").each(function(e,i){i.outerHTML=t({style:'style="padding-bottom: '+i.height/i.width*100+'%;"',video:i.outerHTML})})}),function($,t,e,i){"use strict";var s=0,n=_.create(OSLC,{name:"Prospectus",init:function(t,e){this.els={menu:$(t)},this.focusable=e;var i=0;s++,this.els.menu.attr({role:e?this.els.menu.hasClass("horizontal")?"menubar":"menu":null,"data-prospectus":"true",id:this.els.menu[0].id||"prospectus-"+s}),this.els.menu.find("ul,li").attr("role","presentation"),this.els.menu.find("a").attr({role:e?"menuitem":null,id:function(){return i++,this.id||"prospectus-"+s+"-"+i}}),this.setFocusable()},findFocusableItem:function(){var t=this.els.menu,e=$("#"+t.attr("aria-activedescendant"));return e.length?e:t.find("a").first()},clearFocusable:function(){this.focusable&&this.els.menu.find("a").attr("tabIndex","-1")},setFocusable:function(){if(this.focusable){var t=this.findFocusableItem();this.clearFocusable(),t.length&&t.attr("tabIndex","0")}},focus:function(){var t=this.findFocusableItem();if(t.length)try{t[0].focus()}catch(e){}return!0}});$.fn.prospectus=function(t){return this.each(function(){t="true"===(t||$(this).attr("data-manage-focus")||"true").toString(),$(this).data("prospectus",_.create(n)).data("prospectus").init(this,t)})},$(e).ready(function(){$("[data-prospectus]").prospectus()}),$(e).on("keydown",'[role="menuitem"], [data-prospectus] :focusable',function(t){var e=t.which||t.keyCode,i=_.range(65,91),s=_.contains(_.union([9,27,37,38,39,40],i),e),n=$(this),r=n.data("drop"),o=n.closest("[data-prospectus]"),l=o.attr("aria-labelledby"),d,c,u,h;if(s&&(9!==e||l)){if(t.preventDefault(),40===e&&r)return void r.open();if(l&&_.contains([9,27,37,39],e)){if(d=$("#"+l),c=d.closest("[data-prospectus]"),d.data("drop")&&d.data("drop").close(),/(37|39)/.test(e))return h=a(c.find('[role="menuitem"]'),d.index(),e),c.attr("aria-activedescendant",h[0].id),c.data("prospectus")&&c.data("prospectus").setFocusable(),void(h.data("drop")&&h.data("drop").open());27===e&&(h=d),9===e&&(u=$(":tabbable").not(d.siblings()).add(d),h=a(u,u.index(d),t.shiftKey?37:39))}else u=o.find("a"),_.contains(i,e)&&(u=u.filter(function(){return _($(this).text()).trim().capitalize().startsWith(String.fromCharCode(e).toUpperCase()).value()})),h=a(u,u.index(this),e);if(h.length)try{h[0].focus()}catch(f){}}}).on("mouseenter focus",'[role="menuitem"], [data-prospectus] :focusable',function(t){var i=$(this).closest("[data-prospectus]"),s=i.data("prospectus");"mouseenter"===t.type&&i.find(":tabbable").is(e.activeElement)||(i.attr("aria-activedescendant",this.id||""),s&&s.setFocusable())});var a=function(t,e,i){return/(37|38)/.test(i)&&e--,/(39|40)/.test(i)&&e++,_.contains(_.range(65,91),i)&&e++,e===t.length&&(e=0),t.eq(e)}}(jQuery,this,this.document),function($,t,e,i){"use strict";var s=0,n=_.create(OSLC,{name:"Bartender",defaultStates:{filter:{on:"All",label:"All"},sort:{on:"order",direction:"asc",label:"Original order"}},bartenderItemTemplate:_.template('<a href="#" class="item hasFlagInline" id="bartender-<%= id %>-<%= name %>-control" aria-haspopup="true" aria-owns="bartender-<%= id %>-<%= name %>-dropdown" aria-controls="bartender-<%= id %>-<%= name %>-dropdown"><div class="flag"><div class="image"><i class="icon grunticon-menu-<%= name %>"></i></div><div class="body"><span id="bartender-<%= id %>-<%= name %>-label" data-text="<%= _.capitalize(name) %>"><%= _.capitalize(name) %></span> &#9662;</div></div></a>'),init:function(t){s++,this.id=s,this.els={menu:$(t),listing:$("#main").find(".listing").first()},this.constructMenu(),this.bindings(),this.update()},update:function(){var t=this,e=this.els.listing.find("[data-filter-target]"),i,s={duration:250,drag:!0};_.forEach(this.state,function(e,i){$(t.drops[i].content).find(".item").removeClass("current").filter('[data-label="'+e.label+'"]').addClass("current");var s="#bartender-"+t.id+"-"+i+"-label";$(s).html($(s).data("text")+(_.contains(["All","Original order"],e.label)?"":': <span class="activeFilter">'+e.label+"</span>"))}),i=e.filter(function(){var e=$(this);return _(t.state).omit("sort").mapValues("on").every(function(t,i){return e.is("[data-filter-"+i+'~="'+t+'"]')})}),e.not(i).filter(":visible").velocity("transition.expandOut",_.defaults({complete:function(){$(this).addClass("hidden")}},s)),i.filter(":hidden").removeClass("hidden").velocity("transition.expandIn",s),this.state.sort&&e.tsort({data:this.state.sort.on,order:this.state.sort.direction})},bindings:function(){var t=this;$(e).on("click","[data-update]",function(e){e.preventDefault();var i=$(this),s=i.data();i.hasClass("current")||(t.state[s.update]=_.omit(s,"update"),t.update())})},constructMenu:function(){this.state={},this.drops={},this.els.cards=this.els.listing.find(".card").closest(".column");var t=this.els.menu.data("controls");return t?(_.forEach(t.split(","),this.buildControl,this),void($.fn.prospectus&&this.els.menu.prospectus())):void console.log("No controls specified for Bartender. Bailing.")},buildControl:function(t){var e=this.els.cards,i,s=this.listFilterMenuItems(t);return s.length<2?void console.log("Control for ",t," did not have enough items. Bailing."):(i=$(this.bartenderItemTemplate({name:t,id:this.id})).appendTo(this.els.menu),this.state[t]=this.defaultStates[t]||this.defaultStates.filter,"sort"===t?e.attr("data-order",function(){return $(this).index()}):e.attr("data-filter-target","true").attr("data-filter-"+t,function(){return _.reduce($(this).find('[data-filter-on="'+t+'"]'),function(t,e){return t+" "+_.classify(_.trim($(e).text()))},"All")}),i.data("drop",this.drops[t]=new Drop({target:i[0],classes:"drop-theme-oslc",toggleBodyClass:!1,tetherOptions:{attachment:"top left",targetAttachment:"top left",optimizations:{moveElement:!1},constraints:[{to:"scrollParent",attachment:"together",pin:["right"]}]}})),this.buildDropMenu(t,s),this.drops[t].on("open",function(){var t=$(this.content).find(".menu").attr({"aria-hidden":"false","aria-expanded":"true"}).data("prospectus");t&&t.focus()}),void this.drops[t].on("close",function(){$(this.content).find(".menu").attr({"aria-hidden":"true","aria-expanded":"false"})}))},listFilterMenuItems:function(t){var e=[];return"sort"===t?e=[[{on:"date",direction:"desc"},"Newest"],[{on:"date",direction:"asc"},"Oldest"],[{on:"order",direction:"asc"},"Original order"]]:(e=_(this.els.listing.find('[data-filter-on="'+t+'"]')).groupBy(function(t){return _.trim($(t).text())}).map(function(t,e){var i=t[0],s=_.trim(e);return[{count:t.length,label:s,on:_.classify(s)},i.innerHTML,i.href,i.className]}).value(),e.push([{count:this.els.cards.length,on:"All"},"All"])),e},buildDropMenu:function(t,e){var i=this.drops[t],s=$("<div>").addClass("menu tensed").attr({"aria-expanded":"false","aria-hidden":"true","data-focusable":"false","aria-labelledby":"bartender-"+this.id+"-"+t+"-control",id:"bartender-"+this.id+"-"+t+"-dropdown"}),n=this.templateFold('<a class="item" href="<%= href %>" data-update="'+t+'" <% _.each(data, function(val,key) { %>data-<%= key %>="<%= val %>" <% }); %>><span class="<%= classes %>"><%= html %></span></a>'),a=function(t){var e=["data","html","href","classes"],i=_.defaults(_.zipObject(e,t),_.zipObject(e,[{},"Label not found","#",""]));return i.data.label||(i.data.label=i.html),i},r=$('<button type="button" tabindex="-1" class="close"><span class="sr-only">Close</span><i class="icon grunticon-js-close"></i></button>').data("dismiss",i);s.html(_.reduce(e.map(a),n,"")),"sort"!==t&&s.find(".item").tsort({data:"count",order:"desc"},{data:"label"}),$.fn.prospectus&&s.prospectus(),$(i.content).html(s).append(r),i.position()}});OSLC.modules.bartender=n,$(e).ready(function(){$("[data-bartender]").each(function(){$(this).data("bartender",_.create(n)).data("bartender").init(this)})})}(jQuery,this,this.document),function($,t,e,i){"use strict";var s=0,n=_.create(OSLC,{name:"DeepThroat",init:function(t){this.el=t,this.id="deepthroat-tooltip-"+s,s++;var e=$(t),i={header:e.text(),tip:e.attr("title")||e.attr("data-tooltip")||"You did not define tooltip text, silly!",id:this.id};!e.is(":tabbable")&&e.attr("tabindex","0"),e.addClass("js-activates-tooltip tooltip-wrap").append(' <i class="icon grunticon-js-infotip"></i>').attr({"aria-describedby":this.id,title:null}).data("drop",this.drop=new Drop({target:e[0],classes:"drop-theme-oslc drop-theme-deepthroat",content:_.template('<div id="<%= id %>" class="copy"><%- tip %></div>',i),position:"top center",openOn:"hover",tetherOptions:{constraints:[{to:"scrollParent",attachment:"together",pin:["right","left"]}]}})),$(this.drop.content).attr({role:"tooltip","aria-hidden":"true"}),this.drop.on("open",function(){$(this.content).toggleAria("hidden")}),this.drop.on("close",function(){$(this.content).toggleAria("hidden")}),$('<button type="button" tabindex="-1" class="close"><span class="sr-only">Close</span><i class="icon grunticon-js-close"></i></button>').data("dismiss",this.drop).appendTo(this.drop.content)},open:function(){this.drop&&this.drop.open()},close:function(){this.drop&&this.drop.close()},show:function(){this.open()},hide:function(){this.close()}});$.fn.deepthroat=function(){return this.each(function(){$(this).data("deepthroat",_.create(n)).data("deepthroat").init(this)})},$(e).ready(function(){$("[data-tooltip]").deepthroat()}),$(e).on("focusin focusout keydown touchend",".js-activates-tooltip",function(t){var e=$(this).data("drop"),i=t.which||t.keyCode;("keydown"!==t.type||27===i)&&(t.preventDefault(),e&&e[/focusout|keydown/.test(t.type)?"close":"open"]())})}(jQuery,this,this.document),function($,t,e,i){"use strict";var s=_.create(OSLC,{name:"Sextant",els:{nav:$("#nav"),main:$("#main"),toggle:$("#navToggle"),allToggled:$("#nav,#main,#navToggle,.close-nav"),close:$(".close-nav")},classes:{open:"nav-is-open"},is_open:function(){return this.els.main.hasClass(this.classes.open)},init:function(){console.log("Initializing Sextant global navigation"),this.els.nav.insertBefore(this.els.main),this.set_main_slide_distance(),this.bindings()},bindings:function(){var e=this;this.els.toggle.add(this.els.close).on("click.oslc.sextant",function(t){t.preventDefault(),e.toggle()});var i=_.once(function(){console.log("doing the one-time injection in case we started too large"),e.set_main_slide_distance(),$(t).trigger("lateStyleInjected.oslc.sextant")});!Modernizr.mq(e.mediaQueries["hand-only"])&&$(t).on("resize.oslc.sextant orientationchange.oslc.sextant",function(){Modernizr.mq(e.mediaQueries["hand-only"])&&i()})},open:function(){this.toggle("open")},close:function(){this.toggle("close")},toggle:function(e){e=e||(this.is_open()?"close":"open");var i="open"===e;console.log(e),$(t).trigger(e+".oslc.sextant"),this.els.allToggled[i?"addClass":"removeClass"](this.classes.open)},set_main_slide_distance:function(t){var e=this.mediaQueries["hand-only"];if(Modernizr.mq(e)){var i="@media "+e,s={};s[i]=["#main."+this.classes.open];var n=t||this.els.nav.outerHeight()+"px",a=Modernizr.csstransforms?Modernizr.prefixed("transform"):"top";a=this.dasherize(a);var r={};r[a]=Modernizr.csstransforms?"translate(0,"+n+")":n,vein.inject([s],r),console.log("injecting distance of "+n)}}});OSLC.modules.sextant=s,$(e).ready(function(){s.init()})}(jQuery,this,this.document),function($,t,e,i){"use strict";var s=0,n=_.create(OSLC,{name:"Whirligig",classes:{active:"active"},aria:{tab:{off:{"aria-expanded":"false","aria-selected":"false",tabindex:"-1"},on:{"aria-expanded":"true","aria-selected":"true",tabindex:"0"}},tabpanel:{off:{"aria-hidden":"true",tabindex:"-1"},on:{"aria-hidden":"false",tabindex:"0"}}},init:function(t){console.log("Initializing Whirligig for #"+t.id);var e=this;this.el=$(t),this.controls=$(".tab",this.el).each(function(){var t=this.getAttribute("href"),i="whirligig-tab-"+s++;$(this).attr(_.extend({role:"tab",id:i,"aria-controls":t.replace("#","")},e.aria.tab.off)),$(t).attr(_.extend({role:"tabpanel","aria-labelledby":i},e.aria.tabpanel.off))}),this.control_wrap=$(".tabs",this.el).attr("role","tablist"),this.controls_area=$(".controls",this.el),this.indicator=$('<ins class="indicator"></ins>').attr("role","presentation").appendTo(this.control_wrap),this.wrapper=$(".panels",this.el),this.panels=$(".panel",this.el),this.controls.hasClass(this.classes.active)||this.controls.first().addClass(this.classes.active),this.to(this.controls.filter("."+this.classes.active).attr("href"),!1),this.bindings()},bindings:function(){var t=this;this.controls.on("click.oslc.whirligig",function(e){e.preventDefault(),$(this).hasClass(t.classes.active)||t.to($(this).attr("href"),!0)}).on("keydown.oslc.whirligig",function(e){$.inArray(e.keyCode,[37,38,39,40])>-1&&e.preventDefault(),(37===e.keyCode||38===e.keyCode)&&t.prev(!0),(39===e.keyCode||40===e.keyCode)&&t.next(!0)})},next:function(t){var e=this.panels.filter("."+this.classes.active),i=e.is(this.panels.last())?this.panels.first():e.next();return this.to("#"+i[0].id,t),!1},prev:function(t){var e=this.panels.filter("."+this.classes.active),i=e.is(this.panels.first())?this.panels.last():e.prev();return this.to("#"+i[0].id,t),!1},to:function(t,e){var i,s,n,a,r;i=$(t),s=i.index(),n="-"+100*s+"%",a=this.supportsAcceleratedTransitions?Modernizr.prefixed("transform"):"left",r=this.supportsAcceleratedTransitions?"translate3d("+n+",0,0)":n,i.hasClass(this.classes.active)||(this.el.trigger({type:"slideStart",relatedTarget:i[0]}),this.wrapper.css(a,r).find("> ."+this.classes.active).removeClass(this.classes.active).attr(this.aria.tabpanel.off),i.addClass(this.classes.active).attr(this.aria.tabpanel.on),this.controls.removeClass(this.classes.active).attr(this.aria.tab.off).filter('[href="'+t+'"]').addClass(this.classes.active).attr(this.aria.tab.on),this.move_indicator(),e&&this.controls.filter("."+this.classes.active).focus())},move_indicator:function(){var t,e,i,s,n;t=this.controls.filter("."+this.classes.active),e=t.position().left+"px",i=t.width()-(t.is(":first-child")?0:4)+"px",s=this.supportsAcceleratedTransitions?Modernizr.prefixed("transform"):"left",n=this.supportsAcceleratedTransitions?"translate3d("+e+",0,0)":e,this.supportsTransitions&&this.indicator.filter(":visible").one(this.supportsTransitions.end,function(){$(this).removeClass("moving")}).addClass("moving"),this.indicator.css("width",i).css(s,n)}});OSLC.modules.whirligig=n,$(function(){$("[data-whirligig]").each(function(){$(this).data("whirligig",_.create(n)).data("whirligig").init(this)})})}(jQuery,this,this.document),function($,t,e,i){"use strict";$(e).on("click",".close",function(t){t.preventDefault();var e=$(this).data("dismiss");e&&e.close&&e.close()}).on("touchend",".close",function(t){t.preventDefault(),t.target.click()})}(jQuery,this,this.document),function($,t,e,i){"use strict";var s=_.create(OSLC,{name:"Doubtfire",els:{nav:$("#nav")},init:function(){console.log("Initialize Doubtfire nanny class"),this.bindings()},bindings:function(){var e=this.modules.sextant,i=this.els.nav.data("whirligig"),s=this;if(e&&i){console.log("DOUBTFIRE: Initialize Sextant + Whirligig interactions"),this.els.nav.on("slideStart",function(t){s.set_main_slide_distance(t.relatedTarget)});var n=_.once(function(){console.log("fired the resize fixes. shouldnt see this again!"),i.move_indicator(),s.set_main_slide_distance()});$(t).on("open.oslc.sextant lateStyleInjected.oslc.sextant orientationchange.oslc.sextant",function(){Modernizr.mq(OSLC.mediaQueries["hand-only"])&&n()})}},set_main_slide_distance:function(t){var e=this.els.nav.data("whirligig");t=t?$(t):e.panels.filter(".active");var i=e.controls_area.outerHeight()+t.outerHeight()+"px";this.modules.sextant.set_main_slide_distance(i)}});$(e).ready(function(){s.init()})}(jQuery,this,this.document);