$.fn.toggleAria=function(t){return this.each(function(){var e=$(this),s="aria-"+t,i=e.attr(s);e.attr(s,"true"===i?"false":"true")})};var OSLC={dasherize:function(t){return _.dasherize(t).replace(/^ms-/,"-ms-")},funcFold:function(t){return function(e,s){return e+t(s)}},templateFold:function(t){return function(e,s){return e+_.template(t,s)}},mediaQueries:{},modules:{},transitionEventNames:{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"}};_.forEach(["screen","landscape","portrait","hand-up","hand-only","knee-up","knee-only","desk-up","desk-only","workstation-up","workstation-only","neckbeard-up","neckbeard-only"],function(t){$("head").append('<meta class="oslc-mq-'+t+'" />'),OSLC.mediaQueries[t]=$(".oslc-mq-"+t).css("font-family").split(/\/|\\|'|"/g).join("")}),OSLC.supportsTransitions=Modernizr&&"csstransitions"in Modernizr&&Modernizr.csstransitions&&{end:OSLC.transitionEventNames[Modernizr.prefixed("transition")]},OSLC.supportsAcceleratedTransitions=Modernizr&&"csstransforms3d"in Modernizr&&Modernizr.csstransforms3d,$(document).on("click","[data-toggle-class]",function(t){var e=$(this);e.attr("data-target")&&(_.forEach(e.attr("data-target").split(","),function(t){var s;s=t.indexOf("|self|")>-1?e:t.indexOf("|parent")>-1?e.parent():$(t),s.length&&s.toggleClass(e.attr("data-toggle-class").split(".").join(""))}),t.preventDefault())}),$(function(){var t=_.template('<div class="fluid-video" <%= style %> ><%= video %></div>');$('iframe[src*="youtube"], iframe[src*="vimeo"]').not(".no-resize").each(function(e,s){s.outerHTML=t({style:'style="padding-bottom: '+s.height/s.width*100+'%;"',video:s.outerHTML})})}),function(t,e,s,i){var n=_.create(OSLC,{name:"Bartender",els:{menu:t("#bartender"),listing:t("#main").find(".listing").first()},state:{filter:"All",sort:"order",direction:"asc"},init:function(){this.constructMenu(),this.bindings(),this.update()},update:function(){var e=this,s=this.els.listing.find("[data-filter-on]");t(this.els.filterMenu.content).find(".item").removeClass("current").filter('[data-tagname="'+this.state.filter+'"]').addClass("current");var i='[data-filter-on~="'+_.classify(this.state.filter)+'"]',n=s.filter(i).filter(":hidden"),a=s.not(i).filter(":visible");a.velocity({opacity:[0,1],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],transformOriginZ:[0,0],scaleX:.5,scaleY:.5,translateZ:0},{duration:200,easing:"easeOutCubic",complete:function(){t(this).addClass("hidden")}}),n.removeClass("hidden").velocity({opacity:[1,0],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],transformOriginZ:[0,0],scaleX:[1,.625],scaleY:[1,.625],translateZ:[0,0]},{duration:200,easing:"easeOutCubic"}),t("#filterBody").html(t("#filterBody").data("text")+("All"===e.state.filter?"":': <span id="activeFilter">'+e.state.filter+"</span>")),t(this.els.sortMenu.content).find(".item").removeClass("current").filter('[data-sort="'+this.state.sort+'"][data-order="'+this.state.direction+'"]').addClass("current"),s.tsort({data:this.state.sort,order:this.state.direction})},bindings:function(){var e=this;t(s).on("click","[data-filter]",function(s){s.preventDefault();var i=t(this);i.hasClass("current")||(e.state.filter=i.data("tagname"),e.update())}).on("click","[data-sort]",function(s){s.preventDefault();var i=t(this);i.hasClass("current")||(e.state.sort=i.data("sort"),e.state.direction=i.data("order"),e.update())})},constructMenu:function(){_.each(this.els.menu.data("bartender").split(","),function(t){_.has(this,"build_"+t)&&this["build_"+t]()},this)},build_filter:function(){var e=t(this.buildMenuItem("filter")).appendTo(this.els.menu),s=t("<div>").addClass("menu tensed"),i=this.els.listing.find(".tag"),n=this.els.listing.find(".card").closest(".column").attr("data-filter-on",function(){return _.reduce(t(this).find(".tag"),function(e,s){return e+" "+_.classify(_.trim(t(s).text()))},"All")}).length,a=_(i).groupBy("textContent").map(function(t){var e=t[0],s=_.trim(e.textContent);return{count:t.length,link:e.href||"#",html:e.innerHTML,classes:e.className,text:s,filter:_.classify(s)}}).value();a.push({count:n,link:"#",html:"All",text:"All",filter:"All",classes:""});var r=this.templateFold('<a class="item" href="<%= link %>" data-count="<%= count %>" data-tagname="<%= text %>" data-filter="<%= filter %>"><span class="count"><%= count %> &times;</span> <span class="<%= classes %>"><%= html %></span></a>');s.append(_.reduceRight(a,r,"")).find(".item").tsort({data:"count",order:"desc"},{data:"tagname"}),this.els.filterMenu=new Drop({target:e[0],classes:"drop-theme-oslc",content:s[0],tetherOptions:{attachment:"top left",targetAttachment:"top left"}}),this.els.filterMenu.on("open",function(){t(this.content).find(".current").velocity("callout.pulse",{duration:400})})},build_sort:function(){var e=t(this.buildMenuItem("sort")).appendTo(this.els.menu),s=[{text:"Newest",sort:"date",order:"desc",classes:""},{text:"Oldest",sort:"date",order:"asc",classes:""},{text:"Original Order",sort:"order",order:"asc",classes:"current"}],i=t("<div>").addClass("menu").append(_.reduce(s,this.templateFold('<a class="item <%= classes %>" href="#" data-sort="<%= sort %>" data-order="<%= order %>"><%= text %></a>'),""));this.els.listing.find(".column").each(function(){t(this).attr("data-order",t(this).index())}),this.els.sortMenu=new Drop({target:e[0],classes:"drop-theme-oslc",content:i[0],tetherOptions:{attachment:"top left",targetAttachment:"top left"}}),this.els.sortMenu.on("open",function(){t(this.content).find(".current").velocity("callout.pulse",{duration:400})})},buildMenuItem:function(t){return _.template('<a href="#" data-has-drop="true" class="item hasFlagInline"><div class="flag"><div class="image"><i class="icon grunticon-menu-<%= name %>"></i></div><div class="body"><span id="<%= name %>Body" data-text="<%= capName %>"><%= capName %></span> &#9662;</div></div></a>',{name:t,capName:_.capitalize(t)})}});n.init()}(jQuery,this,this.document),function(t,e,s,i){"use strict";var n=_.create(OSLC,{els:{nav:t("#nav"),main:t("#main"),toggle:t("#navToggle"),allToggled:t("#nav,#main,#navToggle,.close-nav"),close:t(".close-nav")},classes:{open:"nav-is-open"},is_open:function(){return this.els.main.hasClass(this.classes.open)},init:function(){this.els.nav.insertBefore(this.els.main),this.set_main_slide_distance(),this.bindings()},bindings:function(){var s=this;this.els.toggle.add(this.els.close).on("click.oslc.sextant",function(t){t.preventDefault(),s.toggle()});var i=_.once(function(){console.log("doing the one-time injection in case we started too large"),s.set_main_slide_distance(),t(e).trigger("lateStyleInjected.oslc.sextant")});!Modernizr.mq(s.mediaQueries["hand-only"])&&t(e).on("resize.oslc.sextant orientationchange.oslc.sextant",function(){Modernizr.mq(s.mediaQueries["hand-only"])&&i()})},open:function(){this.toggle("open")},close:function(){this.toggle("close")},toggle:function(s){s=s||(this.is_open()?"close":"open");var i="open"===s;console.log(s),t(e).trigger(s+".oslc.sextant"),this.els.allToggled[i?"addClass":"removeClass"](this.classes.open)},set_main_slide_distance:function(t){var e=this.mediaQueries["hand-only"];if(Modernizr.mq(e)){var s="@media "+e,i={};i[s]=["#main."+this.classes.open];var n=t||this.els.nav.outerHeight()+"px",a=Modernizr.csstransforms?Modernizr.prefixed("transform"):"top";a=this.dasherize(a);var r={};r[a]=Modernizr.csstransforms?"translate(0,"+n+")":n,vein.inject([i],r),console.log("injecting distance of "+n)}}});n.init(),OSLC.modules.sextant=n}(jQuery,this,this.document),function(t,e,s,i){"use strict";var n=0,a=_.create(OSLC,{classes:{active:"active"},aria:{tab:{off:{"aria-expanded":"false","aria-selected":"false",tabindex:"-1"},on:{"aria-expanded":"true","aria-selected":"true",tabindex:"0"}},tabpanel:{off:{"aria-hidden":"true",tabindex:"-1"},on:{"aria-hidden":"false",tabindex:"0"}}},init:function(e){var s=this;this.el=t(e),this.controls=t(".tab",this.el).each(function(){var e=this.getAttribute("href"),i="whirligig-tab-"+n++;t(this).attr(_.extend({role:"tab",id:i,"aria-controls":e.replace("#","")},s.aria.tab.off)),t(e).attr(_.extend({role:"tabpanel","aria-labelledby":i},s.aria.tabpanel.off))}),this.control_wrap=t(".tabs",this.el).attr("role","tablist"),this.controls_area=t(".controls",this.el),this.indicator=t('<ins class="indicator"></ins>').attr("role","presentation").appendTo(this.control_wrap),this.wrapper=t(".panels",this.el),this.panels=t(".panel",this.el),this.controls.hasClass(this.classes.active)||this.controls.first().addClass(this.classes.active),this.to(this.controls.filter("."+this.classes.active).attr("href"),!1),this.bindings()},bindings:function(){var e=this;this.controls.on("click.oslc.whirligig",function(s){s.preventDefault(),t(this).hasClass(e.classes.active)||e.to(t(this).attr("href"),!0)}).on("keydown.oslc.whirligig",function(s){t.inArray(s.keyCode,[37,38,39,40])>-1&&s.preventDefault(),(37===s.keyCode||38===s.keyCode)&&e.prev(!0),(39===s.keyCode||40===s.keyCode)&&e.next(!0)})},next:function(t){var e=this.panels.filter("."+this.classes.active),s=e.is(this.panels.last())?this.panels.first():e.next();return this.to("#"+s[0].id,t),!1},prev:function(t){var e=this.panels.filter("."+this.classes.active),s=e.is(this.panels.first())?this.panels.last():e.prev();return this.to("#"+s[0].id,t),!1},to:function(e,s){var i,n,a,r,o;i=t(e),n=i.index(),a="-"+100*n+"%",r=this.supportsAcceleratedTransitions?Modernizr.prefixed("transform"):"left",o=this.supportsAcceleratedTransitions?"translate3d("+a+",0,0)":a,i.hasClass(this.classes.active)||(this.el.trigger({type:"slideStart",relatedTarget:i[0]}),this.wrapper.css(r,o).find("> ."+this.classes.active).removeClass(this.classes.active).attr(this.aria.tabpanel.off),i.addClass(this.classes.active).attr(this.aria.tabpanel.on),this.controls.removeClass(this.classes.active).attr(this.aria.tab.off).filter('[href="'+e+'"]').addClass(this.classes.active).attr(this.aria.tab.on),this.move_indicator(),s&&this.controls.filter("."+this.classes.active).focus())},move_indicator:function(){var e,s,i,n,a;e=this.controls.filter("."+this.classes.active),s=e.position().left+"px",i=e.width()-(e.is(":first-child")?0:4)+"px",n=this.supportsAcceleratedTransitions?Modernizr.prefixed("transform"):"left",a=this.supportsAcceleratedTransitions?"translate3d("+s+",0,0)":s,this.supportsTransitions&&this.indicator.filter(":visible").one(this.supportsTransitions.end,function(){t(this).removeClass("moving")}).addClass("moving"),this.indicator.css("width",i).css(n,a)}});t(function(){t("[data-whirligig]").each(function(){t(this).data("whirligig",_.create(a)).data("whirligig").init(this)})}),OSLC.modules.whirligig=a}(jQuery,this,this.document),function(t,e,s,i){"use strict";var n=_.create(OSLC,{els:{nav:t("#nav")},init:function(){this.bindings()},bindings:function(){var s=this.modules.sextant,i=this.els.nav.data("whirligig"),n=this;if(s&&i){this.els.nav.on("slideStart",function(t){n.set_main_slide_distance(t.relatedTarget)});var a=_.once(function(){console.log("fired the resize fixes. shouldnt see this again!"),i.move_indicator(),n.set_main_slide_distance()});t(e).on("open.oslc.sextant lateStyleInjected.oslc.sextant orientationchange.oslc.sextant",function(){Modernizr.mq(OSLC.mediaQueries["hand-only"])&&a()})}},set_main_slide_distance:function(e){var s=this.els.nav.data("whirligig");e=e?t(e):s.panels.filter(".active");var i=s.controls_area.outerHeight()+e.outerHeight()+"px";this.modules.sextant.set_main_slide_distance(i)}});n.init()}(jQuery,this,this.document);